<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ExamSpeed Math - Powered by RAMA</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

    <style>
        :root { --bg: #0b0f1a; --card: #161b2c; --primary: #38bdf8; --gold: #fbbf24; --success: #22c55e; --danger: #ef4444; }
        * { box-sizing: border-box; font-family: 'Outfit', sans-serif; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); color: white; height: 100vh; overflow: hidden; display: flex; flex-direction: column; }
        
        .header { padding: 15px 20px; background: rgba(22, 27, 44, 0.95); border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; align-items: center; }
        .main-container { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 100px; }

        .hub-section { margin-bottom: 25px; }
        .hub-title { font-size: 11px; color: var(--primary); font-weight: 800; letter-spacing: 1.5px; text-transform: uppercase; margin-bottom: 12px; display: flex; align-items: center; }
        .hub-title::after { content: ""; flex: 1; height: 1px; background: rgba(56, 189, 248, 0.1); margin-left: 10px; }

        .grid-card { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .card { background: var(--card); border-radius: 18px; padding: 18px; border: 1px solid #232a3d; text-align: center; cursor: pointer; }
        .card h3 { font-size: 13px; color: #f1f5f9; margin-top: 5px; }
        .card span { font-size: 22px; }

        .overlay { position: fixed; inset: 0; background: var(--bg); z-index: 2000; display: none; flex-direction: column; overflow-y: auto; padding: 20px; }
        .close-btn { background: var(--danger); border: none; color: white; padding: 8px 15px; border-radius: 10px; font-weight: 800; }

        .formula-group { margin-bottom: 25px; }
        .formula-head { color: var(--gold); border-bottom: 1px solid #2d364d; padding-bottom: 5px; margin-bottom: 10px; font-size: 16px; font-weight: 800; }
        .formula-item { background: #1e293b; padding: 12px; border-radius: 10px; margin-bottom: 8px; font-size: 14px; line-height: 1.6; border-left: 4px solid var(--primary); }
        
        .table-view { background: #1c243a; padding: 20px; border-radius: 20px; border: 2px solid var(--primary); margin-bottom: 20px; display: none; }
        .table-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-weight: bold; font-size: 18px; }

        select { width: 100%; padding: 15px; border-radius: 12px; background: #1e293b; color: white; border: 1px solid #2d364d; font-size: 16px; margin-bottom: 15px; outline: none; }
        .btn-main { width: 100%; padding: 18px; background: var(--primary); border: none; color: white; border-radius: 15px; font-weight: 900; cursor: pointer; }
        .q-box { background: var(--card); padding: 30px; border-radius: 25px; border: 2px solid var(--primary); text-align: center; margin: 20px 0; }
        .q-text { font-size: 35px; font-weight: 900; }
        .opt-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .opt-btn { background: #1e293b; border: 1px solid #2d364d; padding: 18px; border-radius: 12px; color: white; font-size: 18px; font-weight: bold; }

        .motivation-card { background: rgba(56, 189, 248, 0.1); border: 1px dashed var(--primary); padding: 15px; border-radius: 15px; margin: 15px 0; font-style: italic; color: #cbd5e1; line-height: 1.4; }
    </style>
</head>
<body>

    <div class="header">
        <div>
            <b style="font-size:18px; display:block;">ExamSpeed Math</b>
            <small style="font-size:10px; color:var(--gold); font-weight:bold;">Powered by RAMA</small>
        </div>
        <button onclick="window.open('https://whatsapp.com/channel/0029VbCeXOeDp2QApxl6vi2p')" style="background:#25d366; border:none; color:white; padding:6px 12px; border-radius:8px; font-size:10px; font-weight:900;">WA CHANNEL</button>
    </div>

    <div class="main-container">
        <div class="hub-section">
            <div class="hub-title">Learning Hub (1-50 & Formulas)</div>
            <div class="grid-card">
                <div class="card" onclick="openLearn('Tables')"><span>üìñ</span><h3>Tables</h3></div>
                <div class="card" onclick="openLearn('Squares')"><span>üî¢</span><h3>Squares</h3></div>
                <div class="card" onclick="openLearn('Cubes')"><span>üßä</span><h3>Cubes</h3></div>
                <div class="card" onclick="openLearn('Cube Roots')"><span>üìê</span><h3>Cube Roots</h3></div>
                <div class="card" onclick="openLearn('Formulas')"><span>üìú</span><h3>Formulas</h3></div>
            </div>
        </div>

        <div class="hub-section">
            <div class="hub-title">Practice Mode</div>
            <div class="grid-card">
                <div class="card" onclick="setupQuiz('Addition')"><span>‚ûï</span><h3>Addition</h3></div>
                <div class="card" onclick="setupQuiz('Subtraction')"><span>‚ûñ</span><h3>Subtraction</h3></div>
                <div class="card" onclick="setupQuiz('Multiplication')"><span>‚úñÔ∏è</span><h3>Multiplication</h3></div>
                <div class="card" onclick="setupQuiz('Division')"><span>‚ûó</span><h3>Division</h3></div>
                <div class="card" onclick="setupQuiz('Percentage')"><span>%</span><h3>Percentage</h3></div>
                <div class="card" onclick="setupQuiz('Squares')"><span>üìä</span><h3>Squares</h3></div>
            </div>
        </div>

        <div class="hub-section">
            <div class="hub-title">Performance Test</div>
            <div class="card" style="width:100%; border:2px solid var(--gold);" onclick="setupQuiz('Mix Speed Test')">
                <span style="font-size:28px;">‚ö°</span>
                <h3 style="color:var(--gold)">Test Calculation Speed (Mix)</h3>
            </div>
        </div>
    </div>

    <div id="common-overlay" class="overlay">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
            <h2 id="overlay-title">Content</h2>
            <button class="close-btn" onclick="closeOverlay()">CLOSE</button>
        </div>
        <div id="table-detail-view" class="table-view"></div>
        <div id="overlay-content"></div>
    </div>

    <div id="quiz-overlay" class="overlay">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2 id="quiz-mode-title">Mode</h2>
            <button class="close-btn" onclick="location.reload()">EXIT</button>
        </div>

        <div id="quiz-setup" style="margin-top:30px;">
            <p style="margin-bottom:10px; color:#94a3b8; font-size:14px;">Select Questions Count:</p>
            <select id="q-count-sel">
                <option value="10">10 Questions</option>
                <option value="20">20 Questions</option>
                <option value="30">30 Questions</option>
                <option value="99999">Unlimited Practice</option>
            </select>
            <p style="margin-bottom:10px; color:#94a3b8; font-size:14px;">Level:</p>
            <select id="q-level">
                <option value="basic">Basic</option>
                <option value="medium">Medium</option>
                <option value="adv">Advanced</option>
            </select>
            <button class="btn-main" onclick="startQuiz()">START TEST ‚ûî</button>
        </div>

        <div id="quiz-engine" style="display:none; margin-top:20px;">
            <div style="display:flex; justify-content:space-between; color:var(--primary); font-weight:bold; margin-bottom:10px;">
                <span id="timer-box">Time: 0s</span>
                <span id="q-progress">Q: 1</span>
            </div>
            <div class="q-box"><div class="q-text" id="q-txt">?</div></div>
            <div class="opt-grid" id="opt-grid"></div>
        </div>

        <div id="result-screen" style="display:none; text-align:center;">
            <h1 style="color:var(--gold); font-size:32px; margin: 20px 0;">Test Finished!</h1>
            <div style="background:#161b2c; padding:20px; border-radius:20px; border:1px solid #232a3d; margin-bottom:20px;">
                <p style="font-size:20px;">Score: <span id="res-score" style="color:var(--success); font-weight:900;">0</span></p>
                <p style="font-size:16px; color:#94a3b8; margin-top:5px;">Time: <span id="res-time" style="color:white;">0</span>s</p>
            </div>
            <div class="motivation-card" id="motivation-msg"></div>
            <button class="btn-main" style="background:#25d366; margin-bottom:12px;" onclick="shareChallenge()">SHARE CHALLENGE ON WHATSAPP ‚ûî</button>
            <button class="btn-main" style="background:#1e293b;" onclick="location.reload()">BACK TO HOME</button>
        </div>
    </div>

    <script>
        let score = 0, qNum = 1, totalQ = 0, timer = 0, timerInt, cAns = 0, currentMode = '';

        const ramaQuotes = [
            "Mehnat ka phal aur samasya ka hal, thodi der se hi sahi par milta zaroor hai!",
            "Haarna tab tak bura nahi hai, jab tak aap phir se koshish karne ka sahas rakhte hain.",
            "Ek fauji aur ek chhatra kabhi give-up nahi karte. Phir se koshish karo!",
            "Speed hi aapki pehchan hai. Agla test isse bhi behtar hona chahiye!",
            "Manzil unhi ko milti hai, jinke sapno mein jaan hoti hai. Practice jaari rakhein!"
        ];

        function closeOverlay() { 
            document.getElementById('common-overlay').style.display = 'none'; 
            document.getElementById('table-detail-view').style.display = 'none';
        }

        function openLearn(type) {
            const overlay = document.getElementById('common-overlay');
            const content = document.getElementById('overlay-content');
            document.getElementById('overlay-title').innerText = type;
            overlay.style.display = 'flex';
            content.innerHTML = '';

            if(type === 'Tables') {
                let h = '<div style="display:grid; grid-template-columns:repeat(3, 1fr); gap:10px;">';
                for(let i=1; i<=50; i++) h += `<div class="card" style="padding:15px; font-weight:900;" onclick="showTable(${i})">${i}</div>`;
                content.innerHTML = h + '</div>';
            } else if(type === 'Formulas') {
                content.innerHTML = `
                <div class="formula-group"><div class="formula-head">üìê GEOMETRY</div>
                <div class="formula-item">Area of triangle = ¬Ω √ó b √ó h</div>
                <div class="formula-item">Semi-perimeter (s) = (a + b + c)/2</div>
                <div class="formula-item">Heron's Formula = ‚àö[s(s‚àía)(s‚àíb)(s‚àíc)]</div>
                <div class="formula-item">Area of circle = œÄr¬≤ | Circumference = 2œÄr</div></div>
                <div class="formula-group"><div class="formula-head">üìê TRIGONOMETRY</div>
                <div class="formula-item">sinŒ∏ = P/H | cosŒ∏ = B/H | tanŒ∏ = P/B</div>
                <div class="formula-item">sin¬≤Œ∏ + cos¬≤Œ∏ = 1 | 1 + tan¬≤Œ∏ = sec¬≤Œ∏</div></div>
                <div class="formula-group"><div class="formula-head">‚úñÔ∏è ALGEBRA</div>
                <div class="formula-item">(a + b)¬≤ = a¬≤ + b¬≤ + 2ab</div>
                <div class="formula-item">Quadratic: x = (‚àíb ¬± ‚àö(b¬≤-4ac))/2a</div></div>`;
            } else if(type === 'Squares' || type === 'Cubes' || type === 'Cube Roots') {
                let h = '<div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">';
                for(let i=1; i<=50; i++) {
                    let val = (type==='Squares') ? i*i : (type==='Cubes' ? i*i*i : i);
                    let label = (type==='Squares') ? `${i}¬≤ = ${val}` : (type==='Cubes' ? `${i}¬≥ = ${val}` : `‚àõ${i*i*i} = ${i}`);
                    h += `<div class="formula-item" style="text-align:center">${label}</div>`;
                }
                content.innerHTML = h + '</div>';
            }
        }

        function showTable(n) {
            const box = document.getElementById('table-detail-view');
            box.style.display = 'block';
            let html = `<div style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid var(--primary); padding-bottom:10px; margin-bottom:15px;"><h3 style="color:var(--primary)">Table of ${n}</h3><button onclick="document.getElementById('table-detail-view').style.display='none'" style="background:var(--danger); border:none; color:white; padding:5px 10px; border-radius:5px; font-weight:bold;">CLOSE</button></div>`;
            for(let i=1; i<=10; i++) html += `<div class="table-row"><span>${n} √ó ${i}</span><span>=</span><span>${n*i}</span></div>`;
            box.innerHTML = html;
            document.getElementById('common-overlay').scrollTo({ top: 0, behavior: 'smooth' });
        }

        function setupQuiz(mode) {
            currentMode = mode;
            document.getElementById('quiz-mode-title').innerText = mode;
            document.getElementById('quiz-overlay').style.display = 'flex';
        }

        function startQuiz() {
            totalQ = parseInt(document.getElementById('q-count-sel').value);
            document.getElementById('quiz-setup').style.display = 'none';
            document.getElementById('quiz-engine').style.display = 'block';
            qNum = 1; score = 0; timer = 0;
            timerInt = setInterval(() => { timer++; document.getElementById('timer-box').innerText = `Time: ${timer}s`; }, 1000);
            generateQ();
        }

        function generateQ() {
            if(qNum > totalQ) { finishQuiz(); return; }
            document.getElementById('q-progress').innerText = `Q: ${qNum}/${totalQ > 100 ? '‚àû' : totalQ}`;
            let level = document.getElementById('q-level').value;
            let range = (level === 'basic') ? 10 : ((level === 'medium') ? 50 : 100);
            let n1 = Math.floor(Math.random() * range) + 1, n2 = Math.floor(Math.random() * range) + 1;
            let q = "", ans = 0;

            let mode = (currentMode === 'Mix Speed Test') ? ['Addition','Subtraction','Multiplication','Squares'][Math.floor(Math.random()*4)] : currentMode;

            if(mode === 'Addition') { q = `${n1} + ${n2}`; ans = n1 + n2; }
            else if(mode === 'Subtraction') { if(n1<n2) [n1,n2]=[n2,n1]; q = `${n1} - ${n2}`; ans = n1 - n2; }
            else if(mode === 'Multiplication') { n1 = Math.floor(Math.random()*20)+1; q = `${n1} √ó ${n2}`; ans = n1 * n2; }
            else if(mode === 'Division') { ans = Math.floor(Math.random()*15)+1; let p = ans * n2; q = `${p} √∑ ${n2}`; }
            else if(mode === 'Percentage') { let p = [10,20,25,50][Math.floor(Math.random()*4)]; q = `${p}% of ${n1*10}`; ans = (p/100)*(n1*10); }
            else if(mode === 'Squares') { n1 = Math.floor(Math.random()*50)+1; q = `${n1}¬≤`; ans = n1 * n1; }

            cAns = ans;
            document.getElementById('q-txt').innerText = q;
            let opts = [ans, ans + (Math.floor(Math.random()*5)+1), ans - (Math.floor(Math.random()*5)+1), ans + 10].sort(()=>Math.random()-0.5);
            document.getElementById('opt-grid').innerHTML = opts.map(o => `<button class="opt-btn" onclick="checkAns(this, ${o})">${o}</button>`).join('');
        }

        function checkAns(btn, sel) {
            if(sel === cAns) {
                btn.style.background = 'var(--success)'; score++;
                confetti({ particleCount: 20, spread: 50, origin: { y: 0.8 } });
            } else { btn.style.background = 'var(--danger)'; }
            setTimeout(() => { qNum++; generateQ(); }, 400);
        }

        function finishQuiz() {
            clearInterval(timerInt);
            document.getElementById('quiz-engine').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
            document.getElementById('res-score').innerText = `${score}/${totalQ > 100 ? qNum-1 : totalQ}`;
            document.getElementById('res-time').innerText = timer;
            document.getElementById('motivation-msg').innerText = ramaQuotes[Math.floor(Math.random()*ramaQuotes.length)];
        }

        function shareChallenge() {
            const waMsg = `üî• *DAM HAI TO HARA KAR DIKHAO!* üî•\n\nMaine *ExamSpeed Math* par *${currentMode}* test diya aur *${timer}s* mein *${score}* score kiya! üòé\n\nKya tum mera ye record tod sakte ho? Challenge accept karo yahan:\nüëâ https://examspeed-math.vercel.app/\n\n_Powered by RAMA_`;
            window.open(`https://wa.me/?text=${encodeURIComponent(waMsg)}`);
        }
    </script>
</body>
</html>
